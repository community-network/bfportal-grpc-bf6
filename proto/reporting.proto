syntax = "proto3";

package santiago.web.reporting;

service WebReporting {
    rpc ReportPlayer (ReportPlayerRequest) returns (ReportingResponse) {}
    rpc ReportExperience (ReportExperienceRequest) returns (ReportingResponse) {}
}

message Player {
  int64 nucleusId = 1;
  int64 personaId = 2;
  Platform platform = 3;
}

enum Platform {
  UNKNOWN = 0;
   /** PC - EA App */
  PC = 1;
  PS4 = 2;
  XBOXONE = 3;
  PS5 = 4;
  XBSX = 5;
  /** COMMON - Used for requests that includes a cross-platform payload */
  COMMON = 6;
  STEAM = 7;
}

message ReportPlayerRequest {
    optional Player offendingPlayer = 1;
    optional string subject = 2;
}

message ReportExperienceRequest {
    string experienceId = 1;
    optional string subject = 2;
}

message ReportingResponse {
    optional CreatePetitionSuccess success = 1;
    optional CreatePetitionError error = 2;
}

message CreatePetitionSuccess {
    string petitionId = 1;
}

enum ReportingErrorType {
    ERROR_TYPES_GENERIC_SERVICE_FAILURE = 0;
    ERROR_TYPES_GENERIC_BUSINESS_FAILURE = 1;
    ERROR_TYPES_INVALID_ARGUMENT = 2;
    ERROR_TYPES_RATE_LIMITED = 3;
}

message CreatePetitionError {
    ReportingErrorType errorType = 1;
    string errorMessage = 2;
}